# 드라이빙존 미션 페이백 시스템 개발 TASK

## 1. 요구사항 분석

### 1.1 기능 요구사항 (Functional Requirements)

#### 사용자 관리
- [ ] 수강카드 등록 기능 (이름, 휴대폰 번호)
- [ ] 사용자 인증 및 프로필 관리
- [ ] 사용자별 미션 진행 상태 추적

#### 미션 시스템
- [ ] **미션 1: 재능충 챌린지**
  - [ ] 교육시간 입력 (14시간 이내)
  - [ ] 합격 인증 사진 업로드
  - [ ] 2만원 페이백 처리
  - [ ] 매달 30만원 상품권 추첨 시스템

- [ ] **미션 2: SNS 인증 미션**
  - [ ] SNS 링크 제출 기능
  - [ ] 1만원 페이백 처리
  - [ ] 링크 유효성 검증

- [ ] **미션 3: 후기 쓰기 미션**
  - [ ] 3개 플랫폼 후기 작성 연동 (스마트플레이스, 운전면허플러스, 도로로)
  - [ ] 커피 쿠폰 자동 지급
  - [ ] 월 20만원 장학금 추첨 시스템

- [ ] **미션 4: 친구 추천 미션**
  - [ ] 추천인 등록 시스템 (최대 3명)
  - [ ] 친구 등록 인증 확인
  - [ ] 5만원 페이백 처리
  - [ ] 추천 링크 생성 및 복사 기능

#### 페이백 & 보상 시스템
- [ ] 페이백 금액 자동 계산
- [ ] 보상 지급 내역 관리
- [ ] 추첨 시스템 (월별 자동 진행)
- [ ] 쿠폰 발급 시스템

### 1.2 비기능 요구사항 (Non-functional Requirements)

#### 성능 요구사항
- [ ] 페이지 로딩 속도 < 3초
- [ ] 이미지 업로드 처리 시간 < 10초
- [ ] 동시 사용자 1,000명 이상 지원

#### 보안 요구사항
- [ ] 개인정보 암호화 저장
- [ ] 휴대폰 번호 인증 (SMS)
- [ ] 이미지 업로드 보안 검증
- [ ] HTTPS 통신 필수

#### 사용성 요구사항
- [ ] 모바일 반응형 디자인
- [ ] 직관적인 UI/UX
- [ ] 접근성 준수 (WCAG 2.1 AA)

### 1.3 제약사항 및 전제조건
- [ ] Supabase 백엔드 사용
- [ ] React + TypeScript 프론트엔드
- [ ] 실시간 미션 상태 업데이트 필요
- [ ] 외부 API 연동 (SMS, 결제)

## 2. 기능 명세서

### 2.1 사용자 등록 시스템
**Input**: 이름(string), 휴대폰번호(string)
**Output**: 등록 성공/실패 메시지
**비즈니스 로직**:
- 휴대폰 번호 중복 검증
- SMS 인증 코드 발송
- 인증 완료 후 사용자 생성

**예외 처리**:
- [ ] 중복 휴대폰 번호 처리
- [ ] SMS 발송 실패 처리
- [ ] 인증 시간 초과 처리

### 2.2 미션 관리 시스템
**Input**: 미션 타입, 사용자 ID, 인증 데이터
**Output**: 미션 완료 상태, 페이백 금액
**비즈니스 로직**:
- 미션별 완료 조건 검증
- 페이백 금액 자동 계산
- 중복 인증 방지

**예외 처리**:
- [ ] 잘못된 인증 데이터 처리
- [ ] 미션 기한 초과 처리
- [ ] 시스템 오류 시 롤백 처리

### 2.3 파일 업로드 시스템
**Input**: 이미지 파일 (합격증, 후기 스크린샷)
**Output**: 업로드된 파일 URL
**비즈니스 로직**:
- 파일 형식 검증 (jpg, png, pdf)
- 파일 크기 제한 (10MB)
- 이미지 리사이징

**예외 처리**:
- [ ] 지원되지 않는 파일 형식
- [ ] 파일 크기 초과
- [ ] 업로드 실패 시 재시도

## 3. 개발 TASK 목록

### Epic 1: 사용자 인증 & 등록 시스템 [P0]
**예상 작업시간**: 40h

#### Story 1-1: 사용자 등록
- [ ] **TASK-001** [Frontend] 수강카드 등록 폼 컴포넌트 (8h)
- [ ] **TASK-002** [Frontend] 휴대폰 인증 UI 구현 (6h)
- [ ] **TASK-003** [Backend] 사용자 등록 API 구현 (8h)
- [ ] **TASK-004** [Backend] SMS 인증 서비스 연동 (6h)
- [ ] **TASK-005** [DB] 사용자 테이블 설계 및 생성 (4h)
- [ ] **TASK-006** [Testing] 사용자 등록 E2E 테스트 (8h)

#### Story 1-2: 로그인 시스템
- [ ] **TASK-007** [Frontend] 로그인/로그아웃 UI (4h)
- [ ] **TASK-008** [Backend] 인증 토큰 관리 (6h)

### Epic 2: 미션 시스템 구현 [P0]
**예상 작업시간**: 80h

#### Story 2-1: 재능충 챌린지 (미션 1)
- [ ] **TASK-009** [Frontend] 교육시간 입력 폼 (6h)
- [ ] **TASK-010** [Frontend] 합격 인증 사진 업로드 (8h)
- [ ] **TASK-011** [Backend] 미션 1 완료 로직 (8h)
- [ ] **TASK-012** [Backend] 페이백 처리 API (6h)
- [ ] **TASK-013** [Backend] 월별 추첨 시스템 (12h)

#### Story 2-2: SNS 인증 미션 (미션 2)
- [ ] **TASK-014** [Frontend] SNS 링크 제출 UI (4h)
- [ ] **TASK-015** [Backend] SNS 링크 유효성 검증 (6h)
- [ ] **TASK-016** [Backend] 미션 2 페이백 로직 (4h)

#### Story 2-3: 후기 쓰기 미션 (미션 3)
- [ ] **TASK-017** [Frontend] 3개 플랫폼 후기 링크 입력 UI (8h)
- [ ] **TASK-018** [Backend] 후기 플랫폼 API 연동 (12h)
- [ ] **TASK-019** [Backend] 쿠폰 발급 시스템 (8h)
- [ ] **TASK-020** [Backend] 장학금 추첨 시스템 (8h)

#### Story 2-4: 친구 추천 미션 (미션 4)
- [ ] **TASK-021** [Frontend] 추천인 등록 UI (6h)
- [ ] **TASK-022** [Frontend] 추천 링크 생성/복사 기능 (4h)
- [ ] **TASK-023** [Backend] 추천 시스템 로직 (10h)
- [ ] **TASK-024** [Backend] 추천 페이백 처리 (6h)

### Epic 3: 대시보드 & 상태 관리 [P1]
**예상 작업시간**: 32h

#### Story 3-1: 미션 상태 대시보드
- [ ] **TASK-025** [Frontend] 미션 진행 상태 컴포넌트 (8h)
- [ ] **TASK-026** [Frontend] 페이백 금액 표시 UI (4h)
- [ ] **TASK-027** [Frontend] 실시간 상태 업데이트 (8h)
- [ ] **TASK-028** [Backend] 미션 상태 조회 API (4h)
- [ ] **TASK-029** [Backend] 실시간 알림 시스템 (8h)

### Epic 4: 관리자 시스템 [P2]
**예상 작업시간**: 48h

#### Story 4-1: 관리자 대시보드
- [ ] **TASK-030** [Frontend] 관리자 로그인 (6h)
- [ ] **TASK-031** [Frontend] 사용자 관리 페이지 (8h)
- [ ] **TASK-032** [Frontend] 미션 인증 검수 UI (8h)
- [ ] **TASK-033** [Backend] 관리자 권한 관리 (6h)
- [ ] **TASK-034** [Backend] 인증 검수 API (8h)
- [ ] **TASK-035** [Backend] 통계 데이터 API (6h)
- [ ] **TASK-036** [DB] 관리자 테이블 및 권한 설계 (6h)

## 4. 기술 스택별 작업

### 4.1 Frontend Tasks (React + TypeScript)

#### 상태 관리 (Zustand)
- [ ] **TASK-037** [P0] 사용자 상태 스토어 구현 (4h)
- [ ] **TASK-038** [P0] 미션 상태 스토어 구현 (6h)
- [ ] **TASK-039** [P1] 페이백 상태 스토어 구현 (4h)

#### 폼 관리 (React Hook Form)
- [ ] **TASK-040** [P0] 사용자 등록 폼 validation (4h)
- [ ] **TASK-041** [P0] 미션 인증 폼 validation (6h)
- [ ] **TASK-042** [P1] 관리자 폼 validation (4h)

#### UI 컴포넌트 (Shadcn/ui)
- [ ] **TASK-043** [P0] 공통 버튼 컴포넌트 스타일링 (2h)
- [ ] **TASK-044** [P0] 카드 컴포넌트 (미션 카드) (4h)
- [ ] **TASK-045** [P0] 폼 Input 컴포넌트 커스터마이징 (3h)
- [ ] **TASK-046** [P1] 모달 컴포넌트 (인증 완료 등) (4h)
- [ ] **TASK-047** [P1] 토스트 알림 컴포넌트 (2h)

#### 반응형 디자인
- [ ] **TASK-048** [P0] 모바일 레이아웃 최적화 (8h)
- [ ] **TASK-049** [P1] 태블릿 레이아웃 조정 (4h)

### 4.2 Backend Tasks (Supabase)

#### 데이터베이스 설계
- [ ] **TASK-050** [P0] ERD 설계 및 테이블 생성 (8h)
- [ ] **TASK-051** [P0] RLS(Row Level Security) 정책 설정 (6h)
- [ ] **TASK-052** [P1] 인덱스 최적화 (4h)

#### API 개발
- [ ] **TASK-053** [P0] Supabase Client 설정 (2h)
- [ ] **TASK-054** [P0] 인증 관련 API 함수 (6h)
- [ ] **TASK-055** [P0] 미션 관련 CRUD API (8h)
- [ ] **TASK-056** [P0] 파일 업로드 Storage 설정 (4h)
- [ ] **TASK-057** [P1] 페이백 관련 API (6h)

#### 실시간 기능
- [ ] **TASK-058** [P1] Realtime subscription 구현 (6h)
- [ ] **TASK-059** [P1] 미션 상태 실시간 업데이트 (4h)

#### 외부 API 연동
- [ ] **TASK-060** [P0] SMS 인증 서비스 (SENS, Aligo 등) (8h)
- [ ] **TASK-061** [P2] 결제 API 연동 (Toss Payments 등) (12h)
- [ ] **TASK-062** [P2] 이메일 발송 서비스 (8h)

### 4.3 Database Tasks

#### 테이블 설계
- [ ] **TASK-063** [P0] users 테이블 (사용자 정보) (2h)
- [ ] **TASK-064** [P0] missions 테이블 (미션 정보) (2h)
- [ ] **TASK-065** [P0] user_missions 테이블 (사용자-미션 진행상태) (3h)
- [ ] **TASK-066** [P0] paybacks 테이블 (페이백 내역) (2h)
- [ ] **TASK-067** [P0] referrals 테이블 (추천 관계) (2h)
- [ ] **TASK-068** [P1] lottery_entries 테이블 (추첨 참여) (2h)
- [ ] **TASK-069** [P1] coupons 테이블 (쿠폰 관리) (2h)
- [ ] **TASK-070** [P2] admin_users 테이블 (관리자) (2h)

#### 데이터베이스 함수
- [ ] **TASK-071** [P0] 미션 완료 검증 함수 (4h)
- [ ] **TASK-072** [P0] 페이백 계산 함수 (4h)
- [ ] **TASK-073** [P1] 추첨 처리 함수 (6h)
- [ ] **TASK-074** [P1] 통계 집계 함수 (4h)

### 4.4 DevOps Tasks

#### 배포 환경 구성
- [ ] **TASK-075** [P1] Vercel 배포 설정 (4h)
- [ ] **TASK-076** [P1] 환경변수 관리 (2h)
- [ ] **TASK-077** [P1] 도메인 연결 및 SSL 인증서 (2h)

#### 모니터링
- [ ] **TASK-078** [P2] 에러 모니터링 (Sentry) (4h)
- [ ] **TASK-079** [P2] 성능 모니터링 (Google Analytics) (3h)
- [ ] **TASK-080** [P2] 서버 로그 관리 (3h)

#### CI/CD
- [ ] **TASK-081** [P2] GitHub Actions 워크플로우 (6h)
- [ ] **TASK-082** [P2] 자동 테스트 파이프라인 (4h)

### 4.5 Testing Tasks

#### Unit Testing
- [ ] **TASK-083** [P1] React 컴포넌트 테스트 (Jest + RTL) (12h)
- [ ] **TASK-084** [P1] Zustand 스토어 테스트 (6h)
- [ ] **TASK-085** [P2] API 함수 테스트 (8h)

#### Integration Testing
- [ ] **TASK-086** [P2] API 통합 테스트 (8h)
- [ ] **TASK-087** [P2] 데이터베이스 함수 테스트 (6h)

#### E2E Testing
- [ ] **TASK-088** [P2] Playwright E2E 테스트 설정 (4h)
- [ ] **TASK-089** [P2] 사용자 등록 플로우 테스트 (6h)
- [ ] **TASK-090** [P2] 미션 완료 플로우 테스트 (8h)

## 5. 의존성 관계 및 개발 순서

### Phase 1: 기반 구축 (1-2주)
1. **TASK-050** → **TASK-063~070** (DB 설계)
2. **TASK-037, 038** (상태 관리)
3. **TASK-053** (Supabase 설정)

### Phase 2: 사용자 시스템 (2-3주)
1. **TASK-001~008** (사용자 등록/인증)
2. **TASK-040, 041** (폼 validation)
3. **TASK-043~047** (기본 UI 컴포넌트)

### Phase 3: 미션 시스템 (3-4주)
1. **TASK-009~024** (4개 미션 구현)
2. **TASK-054~057** (관련 API 개발)
3. **TASK-048** (모바일 최적화)

### Phase 4: 부가 기능 (1-2주)
1. **TASK-025~029** (대시보드)
2. **TASK-058~062** (실시간/외부 API)

### Phase 5: 관리자 & 최적화 (1-2주)
1. **TASK-030~036** (관리자 시스템)
2. **TASK-075~082** (배포/모니터링)

### Phase 6: 테스트 & 품질 보증 (1주)
1. **TASK-083~090** (테스트 작성)
2. 버그 수정 및 성능 최적화

## 6. 우선순위 범례
- **P0**: 필수 기능 (MVP)
- **P1**: 중요 기능 (런칭 후 빠른 추가)
- **P2**: 부가 기능 (장기 로드맵)
- **P3**: 향후 검토 기능

<!-- **총 예상 개발 기간**: 10-12주
**MVP 기준 개발 기간**: 6-8주
**핵심 개발자**: Frontend 1명, Backend 1명 기준 -->
